{"ast":null,"code":"import React,{useEffect,useState,useContext}from'react';import{AuthContext}from'../context/AuthContext';import api from'../utils/api';import OrderStatus from'../components/OrderStatus';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AdminDashboard=()=>{const{token,user}=useContext(AuthContext);const[orders,setOrders]=useState([]);const[contacts,setContacts]=useState([]);useEffect(()=>{if(user&&user.role==='admin'){api.get('/orders/all',token).then(setOrders);api.get('/contacts',token).then(setContacts);}},[token,user]);const handleStatusChange=async(orderId,status)=>{await api.patch(`/orders/${orderId}/status`,{status},token);const updated=await api.get('/orders/all',token);setOrders(updated);};if(!user||user.role!=='admin')return/*#__PURE__*/_jsx(\"p\",{children:\"Access denied\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"admin-dashboard\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Admin Dashboard\"}),/*#__PURE__*/_jsx(\"h3\",{children:\"All Orders\"}),/*#__PURE__*/_jsx(OrderStatus,{orders:orders,onStatusChange:handleStatusChange}),/*#__PURE__*/_jsx(\"h3\",{children:\"Contact Messages\"}),/*#__PURE__*/_jsx(\"ul\",{children:contacts.map(msg=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(\"b\",{children:msg.name}),\" (\",msg.email,\"): \",msg.message]},msg._id))})]});};export default AdminDashboard;","map":{"version":3,"names":["React","useEffect","useState","useContext","AuthContext","api","OrderStatus","jsx","_jsx","jsxs","_jsxs","AdminDashboard","token","user","orders","setOrders","contacts","setContacts","role","get","then","handleStatusChange","orderId","status","patch","updated","children","className","onStatusChange","map","msg","name","email","message","_id"],"sources":["/Users/adityakumar/DELIVERY/frontend/src/pages/AdminDashboard.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport api from '../utils/api';\nimport OrderStatus from '../components/OrderStatus';\n\nconst AdminDashboard = () => {\n  const { token, user } = useContext(AuthContext);\n  const [orders, setOrders] = useState([]);\n  const [contacts, setContacts] = useState([]);\n\n  useEffect(() => {\n    if (user && user.role === 'admin') {\n      api.get('/orders/all', token).then(setOrders);\n      api.get('/contacts', token).then(setContacts);\n    }\n  }, [token, user]);\n\n  const handleStatusChange = async (orderId, status) => {\n    await api.patch(`/orders/${orderId}/status`, { status }, token);\n    const updated = await api.get('/orders/all', token);\n    setOrders(updated);\n  };\n\n  if (!user || user.role !== 'admin') return <p>Access denied</p>;\n\n  return (\n    <div className=\"admin-dashboard\">\n      <h2>Admin Dashboard</h2>\n      <h3>All Orders</h3>\n      <OrderStatus orders={orders} onStatusChange={handleStatusChange} />\n      <h3>Contact Messages</h3>\n      <ul>\n        {contacts.map(msg => (\n          <li key={msg._id}><b>{msg.name}</b> ({msg.email}): {msg.message}</li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default AdminDashboard; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,UAAU,KAAQ,OAAO,CAC9D,OAASC,WAAW,KAAQ,wBAAwB,CACpD,MAAO,CAAAC,GAAG,KAAM,cAAc,CAC9B,MAAO,CAAAC,WAAW,KAAM,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEpD,KAAM,CAAAC,cAAc,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAEC,KAAK,CAAEC,IAAK,CAAC,CAAGV,UAAU,CAACC,WAAW,CAAC,CAC/C,KAAM,CAACU,MAAM,CAAEC,SAAS,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CACxC,KAAM,CAACc,QAAQ,CAAEC,WAAW,CAAC,CAAGf,QAAQ,CAAC,EAAE,CAAC,CAE5CD,SAAS,CAAC,IAAM,CACd,GAAIY,IAAI,EAAIA,IAAI,CAACK,IAAI,GAAK,OAAO,CAAE,CACjCb,GAAG,CAACc,GAAG,CAAC,aAAa,CAAEP,KAAK,CAAC,CAACQ,IAAI,CAACL,SAAS,CAAC,CAC7CV,GAAG,CAACc,GAAG,CAAC,WAAW,CAAEP,KAAK,CAAC,CAACQ,IAAI,CAACH,WAAW,CAAC,CAC/C,CACF,CAAC,CAAE,CAACL,KAAK,CAAEC,IAAI,CAAC,CAAC,CAEjB,KAAM,CAAAQ,kBAAkB,CAAG,KAAAA,CAAOC,OAAO,CAAEC,MAAM,GAAK,CACpD,KAAM,CAAAlB,GAAG,CAACmB,KAAK,CAAC,WAAWF,OAAO,SAAS,CAAE,CAAEC,MAAO,CAAC,CAAEX,KAAK,CAAC,CAC/D,KAAM,CAAAa,OAAO,CAAG,KAAM,CAAApB,GAAG,CAACc,GAAG,CAAC,aAAa,CAAEP,KAAK,CAAC,CACnDG,SAAS,CAACU,OAAO,CAAC,CACpB,CAAC,CAED,GAAI,CAACZ,IAAI,EAAIA,IAAI,CAACK,IAAI,GAAK,OAAO,CAAE,mBAAOV,IAAA,MAAAkB,QAAA,CAAG,eAAa,CAAG,CAAC,CAE/D,mBACEhB,KAAA,QAAKiB,SAAS,CAAC,iBAAiB,CAAAD,QAAA,eAC9BlB,IAAA,OAAAkB,QAAA,CAAI,iBAAe,CAAI,CAAC,cACxBlB,IAAA,OAAAkB,QAAA,CAAI,YAAU,CAAI,CAAC,cACnBlB,IAAA,CAACF,WAAW,EAACQ,MAAM,CAAEA,MAAO,CAACc,cAAc,CAAEP,kBAAmB,CAAE,CAAC,cACnEb,IAAA,OAAAkB,QAAA,CAAI,kBAAgB,CAAI,CAAC,cACzBlB,IAAA,OAAAkB,QAAA,CACGV,QAAQ,CAACa,GAAG,CAACC,GAAG,eACfpB,KAAA,OAAAgB,QAAA,eAAkBlB,IAAA,MAAAkB,QAAA,CAAII,GAAG,CAACC,IAAI,CAAI,CAAC,KAAE,CAACD,GAAG,CAACE,KAAK,CAAC,KAAG,CAACF,GAAG,CAACG,OAAO,GAAtDH,GAAG,CAACI,GAAuD,CACrE,CAAC,CACA,CAAC,EACF,CAAC,CAEV,CAAC,CAED,cAAe,CAAAvB,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}