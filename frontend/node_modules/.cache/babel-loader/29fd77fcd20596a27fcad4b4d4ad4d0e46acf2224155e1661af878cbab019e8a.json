{"ast":null,"code":"import React,{createContext,useState,useEffect,useContext}from'react';import{AuthContext}from'./AuthContext';import api from'../utils/api';import{jsx as _jsx}from\"react/jsx-runtime\";export const CartContext=/*#__PURE__*/createContext();export const CartProvider=_ref=>{let{children}=_ref;const{token}=useContext(AuthContext);const[cart,setCart]=useState([]);useEffect(()=>{const fetchCart=async()=>{if(token){const res=await api.get('/cart',token);setCart(res.items||[]);}else{setCart([]);}};fetchCart();},[token]);const addToCart=async function(foodId){let quantity=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;if(token){const res=await api.post('/cart/add',{foodId,quantity},token);setCart(res.items);}};const removeFromCart=async foodId=>{if(token){var _res$cart;const res=await api.post('/cart/remove',{foodId},token);setCart(res.items||((_res$cart=res.cart)===null||_res$cart===void 0?void 0:_res$cart.items)||[]);}};const clearCart=()=>setCart([]);return/*#__PURE__*/_jsx(CartContext.Provider,{value:{cart,addToCart,removeFromCart,clearCart},children:children});};","map":{"version":3,"names":["React","createContext","useState","useEffect","useContext","AuthContext","api","jsx","_jsx","CartContext","CartProvider","_ref","children","token","cart","setCart","fetchCart","res","get","items","addToCart","foodId","quantity","arguments","length","undefined","post","removeFromCart","_res$cart","clearCart","Provider","value"],"sources":["/Users/adityakumar/DELIVERY/frontend/src/context/CartContext.js"],"sourcesContent":["import React, { createContext, useState, useEffect, useContext } from 'react';\nimport { AuthContext } from './AuthContext';\nimport api from '../utils/api';\n\nexport const CartContext = createContext();\n\nexport const CartProvider = ({ children }) => {\n  const { token } = useContext(AuthContext);\n  const [cart, setCart] = useState([]);\n\n  useEffect(() => {\n    const fetchCart = async () => {\n      if (token) {\n        const res = await api.get('/cart', token);\n        setCart(res.items || []);\n      } else {\n        setCart([]);\n      }\n    };\n    fetchCart();\n  }, [token]);\n\n  const addToCart = async (foodId, quantity = 1) => {\n    if (token) {\n      const res = await api.post('/cart/add', { foodId, quantity }, token);\n      setCart(res.items);\n    }\n  };\n\n  const removeFromCart = async (foodId) => {\n    if (token) {\n      const res = await api.post('/cart/remove', { foodId }, token);\n      setCart(res.items || res.cart?.items || []);\n    }\n  };\n\n  const clearCart = () => setCart([]);\n\n  return (\n    <CartContext.Provider value={{ cart, addToCart, removeFromCart, clearCart }}>\n      {children}\n    </CartContext.Provider>\n  );\n}; "],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,aAAa,CAAEC,QAAQ,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CAC7E,OAASC,WAAW,KAAQ,eAAe,CAC3C,MAAO,CAAAC,GAAG,KAAM,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE/B,MAAO,MAAM,CAAAC,WAAW,cAAGR,aAAa,CAAC,CAAC,CAE1C,MAAO,MAAM,CAAAS,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAAEE,KAAM,CAAC,CAAGT,UAAU,CAACC,WAAW,CAAC,CACzC,KAAM,CAACS,IAAI,CAAEC,OAAO,CAAC,CAAGb,QAAQ,CAAC,EAAE,CAAC,CAEpCC,SAAS,CAAC,IAAM,CACd,KAAM,CAAAa,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC5B,GAAIH,KAAK,CAAE,CACT,KAAM,CAAAI,GAAG,CAAG,KAAM,CAAAX,GAAG,CAACY,GAAG,CAAC,OAAO,CAAEL,KAAK,CAAC,CACzCE,OAAO,CAACE,GAAG,CAACE,KAAK,EAAI,EAAE,CAAC,CAC1B,CAAC,IAAM,CACLJ,OAAO,CAAC,EAAE,CAAC,CACb,CACF,CAAC,CACDC,SAAS,CAAC,CAAC,CACb,CAAC,CAAE,CAACH,KAAK,CAAC,CAAC,CAEX,KAAM,CAAAO,SAAS,CAAG,cAAAA,CAAOC,MAAM,CAAmB,IAAjB,CAAAC,QAAQ,CAAAC,SAAA,CAAAC,MAAA,IAAAD,SAAA,MAAAE,SAAA,CAAAF,SAAA,IAAG,CAAC,CAC3C,GAAIV,KAAK,CAAE,CACT,KAAM,CAAAI,GAAG,CAAG,KAAM,CAAAX,GAAG,CAACoB,IAAI,CAAC,WAAW,CAAE,CAAEL,MAAM,CAAEC,QAAS,CAAC,CAAET,KAAK,CAAC,CACpEE,OAAO,CAACE,GAAG,CAACE,KAAK,CAAC,CACpB,CACF,CAAC,CAED,KAAM,CAAAQ,cAAc,CAAG,KAAO,CAAAN,MAAM,EAAK,CACvC,GAAIR,KAAK,CAAE,KAAAe,SAAA,CACT,KAAM,CAAAX,GAAG,CAAG,KAAM,CAAAX,GAAG,CAACoB,IAAI,CAAC,cAAc,CAAE,CAAEL,MAAO,CAAC,CAAER,KAAK,CAAC,CAC7DE,OAAO,CAACE,GAAG,CAACE,KAAK,IAAAS,SAAA,CAAIX,GAAG,CAACH,IAAI,UAAAc,SAAA,iBAARA,SAAA,CAAUT,KAAK,GAAI,EAAE,CAAC,CAC7C,CACF,CAAC,CAED,KAAM,CAAAU,SAAS,CAAGA,CAAA,GAAMd,OAAO,CAAC,EAAE,CAAC,CAEnC,mBACEP,IAAA,CAACC,WAAW,CAACqB,QAAQ,EAACC,KAAK,CAAE,CAAEjB,IAAI,CAAEM,SAAS,CAAEO,cAAc,CAAEE,SAAU,CAAE,CAAAjB,QAAA,CACzEA,QAAQ,CACW,CAAC,CAE3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}