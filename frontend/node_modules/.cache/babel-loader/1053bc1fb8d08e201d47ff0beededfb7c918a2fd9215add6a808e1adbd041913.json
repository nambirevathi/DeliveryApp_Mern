{"ast":null,"code":"import React,{useContext}from'react';import{CartContext}from'../context/CartContext';import{AuthContext}from'../context/AuthContext';import api from'../utils/api';import CartItem from'../components/CartItem';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Cart=()=>{const{cart,removeFromCart,clearCart}=useContext(CartContext);const{token}=useContext(AuthContext);const[message,setMessage]=React.useState('');const[orderPlaced,setOrderPlaced]=React.useState(false);const navigate=useNavigate();const total=cart.reduce((sum,item)=>sum+item.food.price*item.quantity,0);const itemCount=cart.reduce((sum,item)=>sum+item.quantity,0);const handlePlaceOrder=async()=>{const res=await api.post('/orders/place',{},token);if(res._id){setMessage('Order placed successfully!');setOrderPlaced(true);clearCart();// Clear cart in context, no reload\nsetTimeout(()=>setMessage(''),2500);}else{setMessage(res.message||'Failed to place order');}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"app-attractive-bg\"}),/*#__PURE__*/_jsx(\"div\",{className:\"app-bg-pattern\"}),/*#__PURE__*/_jsx(\"div\",{className:\"app-content\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"cart-container cart-modern\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"page-title-box\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"page-title\",children:\"Your Cart\"})}),cart.length===0?/*#__PURE__*/_jsx(\"p\",{children:\"Cart is empty\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-list\",children:cart.map(item=>/*#__PURE__*/_jsx(CartItem,{item:item,onRemove:removeFromCart},item.food._id))}),/*#__PURE__*/_jsxs(\"div\",{className:\"cart-summary\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Items:\"}),\" \",itemCount]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Total:\"}),\" \\u20B9\",total.toFixed(2)]}),/*#__PURE__*/_jsx(\"button\",{className:\"cart-order-btn\",onClick:handlePlaceOrder,children:\"Place Order\"})]})]}),orderPlaced&&/*#__PURE__*/_jsxs(\"div\",{className:\"order-success popIn\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Order placed successfully!\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/orders'),children:\"View My Order\"})]}),message&&/*#__PURE__*/_jsx(\"div\",{className:\"cart-message fade-in\",children:message})]})})]});};export default Cart;","map":{"version":3,"names":["React","useContext","CartContext","AuthContext","api","CartItem","useNavigate","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Cart","cart","removeFromCart","clearCart","token","message","setMessage","useState","orderPlaced","setOrderPlaced","navigate","total","reduce","sum","item","food","price","quantity","itemCount","handlePlaceOrder","res","post","_id","setTimeout","children","className","length","map","onRemove","toFixed","onClick"],"sources":["/Users/adityakumar/DELIVERY/frontend/src/pages/Cart.js"],"sourcesContent":["import React, { useContext } from 'react';\nimport { CartContext } from '../context/CartContext';\nimport { AuthContext } from '../context/AuthContext';\nimport api from '../utils/api';\nimport CartItem from '../components/CartItem';\nimport { useNavigate } from 'react-router-dom';\n\nconst Cart = () => {\n  const { cart, removeFromCart, clearCart } = useContext(CartContext);\n  const { token } = useContext(AuthContext);\n  const [message, setMessage] = React.useState('');\n  const [orderPlaced, setOrderPlaced] = React.useState(false);\n  const navigate = useNavigate();\n\n  const total = cart.reduce((sum, item) => sum + (item.food.price * item.quantity), 0);\n  const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0);\n\n  const handlePlaceOrder = async () => {\n    const res = await api.post('/orders/place', {}, token);\n    if (res._id) {\n      setMessage('Order placed successfully!');\n      setOrderPlaced(true);\n      clearCart(); // Clear cart in context, no reload\n      setTimeout(() => setMessage(''), 2500);\n    } else {\n      setMessage(res.message || 'Failed to place order');\n    }\n  };\n\n  return (\n    <>\n      <div className=\"app-attractive-bg\" />\n      <div className=\"app-bg-pattern\" />\n      <div className=\"app-content\">\n        <div className=\"cart-container cart-modern\">\n          <div className=\"page-title-box\">\n            <h2 className=\"page-title\">Your Cart</h2>\n          </div>\n          {cart.length === 0 ? <p>Cart is empty</p> : (\n            <>\n              <div className=\"cart-list\">\n                {cart.map(item => (\n                  <CartItem key={item.food._id} item={item} onRemove={removeFromCart} />\n                ))}\n              </div>\n              <div className=\"cart-summary\">\n                <div><b>Items:</b> {itemCount}</div>\n                <div><b>Total:</b> â‚¹{total.toFixed(2)}</div>\n                <button className=\"cart-order-btn\" onClick={handlePlaceOrder}>Place Order</button>\n              </div>\n            </>\n          )}\n          {orderPlaced && (\n            <div className=\"order-success popIn\">\n              <p>Order placed successfully!</p>\n              <button onClick={() => navigate('/orders')}>View My Order</button>\n            </div>\n          )}\n          {message && <div className=\"cart-message fade-in\">{message}</div>}\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Cart; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}