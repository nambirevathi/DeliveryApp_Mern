{"ast":null,"code":"var _jsxFileName = \"/Users/adityakumar/DELIVERY/frontend/src/pages/AdminDashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport api from '../utils/api';\nimport OrderStatus from '../components/OrderStatus';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AdminDashboard = () => {\n  _s();\n  const {\n    token,\n    user\n  } = useContext(AuthContext);\n  const [orders, setOrders] = useState([]);\n  const [contacts, setContacts] = useState([]);\n  useEffect(() => {\n    if (user && user.role === 'admin') {\n      api.get('/orders/all', token).then(setOrders);\n      api.get('/contacts', token).then(setContacts);\n    }\n  }, [token, user]);\n  const handleStatusChange = async (orderId, status) => {\n    await api.patch(`/orders/${orderId}/status`, {\n      status\n    }, token);\n    const updated = await api.get('/orders/all', token);\n    setOrders(updated);\n  };\n  if (!user || user.role !== 'admin') return /*#__PURE__*/_jsxDEV(\"p\", {\n    children: \"Access denied\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 46\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"admin-dashboard\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Admin Dashboard\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"All Orders\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(OrderStatus, {\n      orders: orders,\n      onStatusChange: handleStatusChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"Contact Messages\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 31,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: contacts.map(msg => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: msg.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 29\n        }, this), \" (\", msg.email, \"): \", msg.message]\n      }, msg._id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 32,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n};\n_s(AdminDashboard, \"E5zGfY3Cg+4q6pLOetB7r35dXhs=\");\n_c = AdminDashboard;\nexport default AdminDashboard;\nvar _c;\n$RefreshReg$(_c, \"AdminDashboard\");","map":{"version":3,"names":["React","useEffect","useState","useContext","AuthContext","api","OrderStatus","jsxDEV","_jsxDEV","AdminDashboard","_s","token","user","orders","setOrders","contacts","setContacts","role","get","then","handleStatusChange","orderId","status","patch","updated","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onStatusChange","map","msg","name","email","message","_id","_c","$RefreshReg$"],"sources":["/Users/adityakumar/DELIVERY/frontend/src/pages/AdminDashboard.js"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react';\nimport { AuthContext } from '../context/AuthContext';\nimport api from '../utils/api';\nimport OrderStatus from '../components/OrderStatus';\n\nconst AdminDashboard = () => {\n  const { token, user } = useContext(AuthContext);\n  const [orders, setOrders] = useState([]);\n  const [contacts, setContacts] = useState([]);\n\n  useEffect(() => {\n    if (user && user.role === 'admin') {\n      api.get('/orders/all', token).then(setOrders);\n      api.get('/contacts', token).then(setContacts);\n    }\n  }, [token, user]);\n\n  const handleStatusChange = async (orderId, status) => {\n    await api.patch(`/orders/${orderId}/status`, { status }, token);\n    const updated = await api.get('/orders/all', token);\n    setOrders(updated);\n  };\n\n  if (!user || user.role !== 'admin') return <p>Access denied</p>;\n\n  return (\n    <div className=\"admin-dashboard\">\n      <h2>Admin Dashboard</h2>\n      <h3>All Orders</h3>\n      <OrderStatus orders={orders} onStatusChange={handleStatusChange} />\n      <h3>Contact Messages</h3>\n      <ul>\n        {contacts.map(msg => (\n          <li key={msg._id}><b>{msg.name}</b> ({msg.email}): {msg.message}</li>\n        ))}\n      </ul>\n    </div>\n  );\n};\n\nexport default AdminDashboard; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}